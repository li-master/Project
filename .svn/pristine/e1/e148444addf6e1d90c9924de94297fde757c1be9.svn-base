<!DOCTYPE html>
<html>
<head th:include="include :: header"></head>
<link rel="stylesheet" type="text/css" href="/admin/css/login.css" />
<body>
	<div class="m-login-bg">
		<div class="m-login">
			<h3>后台系统登录</h3>
			<div class="m-login-warp">
				<form class="layui-form" id="layui-form" method="post">
					<div class="layui-form-item">
						<input type="text" name="title" required lay-verify="required"
							placeholder="用户名" autocomplete="off" class="layui-input">
					</div>
					<div class="layui-form-item">
						<input type="text" name="password" required lay-verify="required"
							placeholder="密码" autocomplete="off" class="layui-input">
					</div>
					<div class="layui-form-item m-login-btn">
						<div class="layui-inline">
							<button onclick="search()" class="layui-btn layui-btn-normal" lay-submit
								lay-filter="login">登录</button>
						</div>
						<div class="layui-inline">
							<button type="reset" class="layui-btn layui-btn-primary">取消</button>
						</div>
					</div>
				</form>
			</div>
			<p class="copyright">Copyright 2015-2016 by XIAODU</p>
		</div>
		<div th:include="include :: footer"></div>
	</div>
	<script>
		layui.use([ 'form', 'layedit', 'laydate' ], function() {
			var form = layui.form(), layer = layui.layer;

			//自定义验证规则
			form.verify({
				title : function(value) {
					if (value.length < 5) {
						return '标题至少得5个字符啊';
					}
				},
				password : [ /(.+){6,12}$/, '密码必须6到12位' ],
				verity : [ /(.+){6}$/, '验证码必须是6位' ],

			});

			//监听提交
			form.on('submit(login)', function(data) {
				layer.alert(JSON.stringify(data.field), {
					title : '最终的提交信息'
				})
				return false;
			});

		});
		
		function search(){
			var loginUser = $("input[name='title']").val()
			var loginpassword = $("input[name='password']").val()
			$.get('/loginController',{"loginUser":loginUser, "loginpassword":loginpassword},(d)=>{
				
				if(d.code==0){
					location.href="/index";
				}
			});
		}
	</script>
</body>

</html>